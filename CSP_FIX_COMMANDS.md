# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã CSP –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –í–´–ü–û–õ–ù–ï–ù–û ‚úÖ

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞ –Ω–∞ Digital Ocean —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å Content Security Policy (CSP):

### –°–∏–º–ø—Ç–æ–º—ã:
- ‚ùå –î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è, –Ω–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- ‚ùå –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –ø–æ—è–≤–ª—è–ª–∏—Å—å –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞:
  - `Refused to execute inline script because it violates CSP directive`
  - `Refused to load inline style because it violates CSP directive`
- ‚ùå –ö–Ω–æ–ø–∫–∏, —Ñ–æ—Ä–º—ã –∏ JavaScript –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª–∏

### –ü—Ä–∏—á–∏–Ω–∞:
Helmet middleware –≤ server.js –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–æ —Å—Ç—Ä–æ–≥–∏–º–∏ CSP –ø—Ä–∞–≤–∏–ª–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ inline —Å–∫—Ä–∏–ø—Ç—ã –∏ —Å—Ç–∏–ª–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞.

### –ù–∞–π–¥–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
–û—Ç–∫–ª—é—á–∏—Ç—å CSP –ø–æ–ª–Ω–æ—Å—Ç—å—é, –∑–∞–º–µ–Ω–∏–≤ —Å–ª–æ–∂–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ `contentSecurityPolicy: false`

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã CSP –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dashboard —Å–µ—Ä–≤–µ—Ä
```bash
pm2 stop dashboard
```

## –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å server.js –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CSP –≤ —Ñ–∞–π–ª–µ `/opt/bazaarGuru-dashboard/server.js` –∏–ª–∏ `~/bazaarGuru-dashboard/server.js`

### –ù–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å:
```javascript
// –°–¢–ê–†–´–ô –ö–û–î (–Ω–∞–π—Ç–∏ —ç—Ç–æ):
contentSecurityPolicy: {
  useDefaults: true,
  directives: {
    // ... –º–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ ...
  }
}

// –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê:
contentSecurityPolicy: false
```

### –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sed –∫–æ–º–∞–Ω–¥—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–º–µ–Ω—ã:
```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–∞—à–±–æ—Ä–¥–∞
cd ~/bazaarGuru-dashboard

# –°–æ–∑–¥–∞—Ç—å backup —Ñ–∞–π–ª–∞
cp server.js server.js.backup

# –ó–∞–º–µ–Ω–∏—Ç—å CSP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ false
sed -i 's/contentSecurityPolicy: {[^}]*}/contentSecurityPolicy: false/g' server.js
```

## –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dashboard —Å–µ—Ä–≤–µ—Ä
```bash
pm2 start ~/bazaarGuru-dashboard/server.js --name dashboard
```

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```bash
pm2 status
pm2 logs dashboard --lines 10
```

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
1. –û—Ç–∫—Ä—ã—Ç—å http://206.189.62.159:8080/admin
2. –ù–∞–∂–∞—Ç—å F12 (Developer Tools)
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Console"
4. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
5. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ "Refused to execute inline script"
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ - –æ—Ç–∫–∞—Ç:
```bash
pm2 stop dashboard
cp server.js.backup server.js
pm2 start ~/bazaarGuru-dashboard/server.js --name dashboard
```

---

## –†–ï–ó–£–õ–¨–¢–ê–¢ - –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê ‚úÖ

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:
1. ‚úÖ –ù–∞–π–¥–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª server.js —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ helmet
2. ‚úÖ –°–æ–∑–¥–∞–Ω backup —Ñ–∞–π–ª–∞: `server.js.backup`
3. ‚úÖ –ó–∞–º–µ–Ω–µ–Ω –≤–µ—Å—å –±–ª–æ–∫ CSP –Ω–∞ `contentSecurityPolicy: false`
4. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω dashboard —á–µ—Ä–µ–∑ pm2
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∏–ª–∞ –ø—Ä–æ–±–ª–µ–º—É:
```bash
pm2 stop dashboard
cp ~/bazaarGuru-dashboard/server.js ~/bazaarGuru-dashboard/server.js.backup
sed -i '/contentSecurityPolicy: {/,/},/c\  contentSecurityPolicy: false,' ~/bazaarGuru-dashboard/server.js
pm2 start ~/bazaarGuru-dashboard/server.js --name dashboard
pm2 status dashboard
```

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
- üü¢ **–î–∞—à–±–æ—Ä–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç**: http://206.189.62.159:8080/admin
- üü¢ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã**: –∫–Ω–æ–ø–∫–∏, —Ñ–æ—Ä–º—ã, –≥—Ä–∞—Ñ–∏–∫–∏
- üü¢ **–ù–µ—Ç –æ—à–∏–±–æ–∫ CSP** –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- üü¢ **Production ready** –Ω–∞ Digital Ocean —Å–µ—Ä–≤–µ—Ä–µ

### –î–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞:
- üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 1,24,567 (‚Üë 3.8% –∑–∞ –Ω–µ–¥–µ–ª—é)
- üí∞ –î–æ—Ö–æ–¥—ã: ‚Çπ42,75,600 (‚Üë 4.3% –∑–∞ –Ω–µ–¥–µ–ª—é)  
- üìä –ö–æ–Ω–≤–µ—Ä—Å–∏—è: 4.2% (‚Üë 0.2% –∑–∞ –Ω–µ–¥–µ–ª—é)
- ‚è±Ô∏è Uptime: 99.96% (‚Üë 0.01% –∑–∞ –Ω–µ–¥–µ–ª—é)