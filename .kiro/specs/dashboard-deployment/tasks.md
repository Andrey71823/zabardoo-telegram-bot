# План Развертывания Дашбордов

- [x] 1. Подготовка к развертыванию


  - Создать снапшот DigitalOcean дроплета для безопасности
  - Проверить текущее состояние сервера и работу Telegram бота
  - Определить свободные порты и ресурсы
  - _Требования: 1_

- [ ] 2. Подготовка файлов для развертывания
- [x] 2.1 Собрать все необходимые файлы дашбордов


  - Скопировать server.js с правильной конфигурацией
  - Собрать все файлы из папки public/ (дашборды, админ панель)
  - Подготовить package.json только с нужными зависимостями
  - Создать .env файл с production настройками
  - _Требования: 2, 3_

- [x] 2.2 Проверить локальную версию дашбордов


  - Запустить локальный сервер и убедиться что все работает
  - Протестировать все дашборды (dashboard.html, dashboard-simple.html, dashboard-fixed.html)
  - Проверить админ панель (user-management.html, user-management-nexus.html)
  - Убедиться что API endpoints возвращают данные
  - _Требования: 2_

- [x] 2.3 Создать deployment package



  - Создать архив с проверенными файлами
  - Включить все статические ресурсы (CSS, JS, изображения)
  - Добавить конфигурационные файлы
  - Создать README с инструкциями по развертыванию
  - _Требования: 5_

- [ ] 3. Настройка окружения на сервере
- [x] 3.1 Подготовить директорию для дашбордов


  - Создать отдельную директорию /opt/zabardoo-dashboard
  - Настроить права доступа для пользователя
  - Создать директории для логов и временных файлов
  - _Требования: 1, 3_

- [x] 3.2 Установить зависимости Node.js

  - Проверить версию Node.js на сервере (должна быть 18+)
  - Установить необходимые npm пакеты
  - Проверить что PM2 установлен для управления процессами
  - _Требования: 3_

- [x] 3.3 Настроить переменные окружения


  - Создать .env файл с production настройками
  - Настроить PORT=8080 (чтобы не конфликтовать с ботом)
  - Установить ADMIN_TOKEN для защиты админ панели
  - Настроить CORS_ALLOWED_ORIGINS для безопасности
  - _Требования: 3_

- [ ] 4. Развертывание файлов
- [x] 4.1 Загрузить файлы на сервер






  - Скопировать deployment package на сервер
  - Распаковать файлы в /opt/zabardoo-dashboard
  - Проверить что все файлы скопированы корректно
  - Установить правильные права доступа
  - _Требования: 1, 2_

- [x] 4.2 Установить зависимости





  - Выполнить npm install в директории дашбордов
  - Проверить что все пакеты установлены без ошибок
  - Убедиться что нет конфликтов с существующими процессами
  - _Требования: 3_

- [x] 4.3 Настроить PM2 конфигурацию

  - Создать ecosystem.config.js для PM2
  - Настроить автозапуск и мониторинг процесса
  - Настроить логирование в отдельные файлы
  - _Требования: 3_

- [ ] 5. Запуск и тестирование
- [x] 5.1 Запустить dashboard сервер





  - Запустить сервер через PM2
  - Проверить что процесс запустился без ошибок
  - Убедиться что порт 8080 доступен
  - Проверить логи на наличие ошибок
  - _Требования: 3, 4_

- [ ] 5.2 Провести smoke tests





  - Проверить доступность главной страницы (GET /)
  - Протестировать health check endpoint (GET /health)
  - Проверить API endpoints (GET /api/dashboard/metrics)
  - Убедиться что статические файлы загружаются
  - _Требования: 4_

- [x] 5.3 Протестировать все дашборды


  - Открыть и проверить dashboard.html
  - Протестировать dashboard-simple.html
  - Проверить dashboard-fixed.html
  - Протестировать админ панель (/admin)
  - Проверить user-management.html и user-management-nexus.html
  - _Требования: 2, 4_

- [ ] 6. Проверка функциональности
- [x] 6.1 Тестировать интерактивные элементы

  - Проверить что все кнопки работают
  - Протестировать формы и поля ввода
  - Убедиться что графики и чарты отображаются
  - Проверить навигацию между страницами
  - _Требования: 2, 4_

- [x] 6.2 Проверить API функциональность

  - Протестировать /api/dashboard/metrics
  - Проверить /api/dashboard/insights
  - Протестировать /api/dashboard/realtime
  - Проверить /monitoring/status и /monitoring/alerts
  - Убедиться что данные возвращаются в правильном формате
  - _Требования: 2, 4_

- [x] 6.3 Проверить безопасность

  - Протестировать аутентификацию админ панели
  - Проверить CORS настройки
  - Убедиться что security headers установлены
  - Протестировать rate limiting
  - _Требования: 3_

- [ ] 7. Финальная проверка и документирование
- [x] 7.1 Убедиться что Telegram бот не пострадал

  - Проверить что бот отвечает на команды
  - Убедиться что все функции бота работают
  - Проверить логи бота на наличие ошибок
  - Протестировать основные сценарии использования бота
  - _Требования: 1_

- [x] 7.2 Создать документацию по развертыванию

  - Записать все выполненные команды
  - Документировать настройки и конфигурацию
  - Создать troubleshooting guide
  - Записать процедуру отката в случае проблем
  - _Требования: 5_

- [x] 7.3 Настроить мониторинг

  - Настроить мониторинг доступности дашбордов
  - Создать алерты для критических ошибок
  - Настроить ротацию логов
  - Проверить что метрики собираются корректно
  - _Требования: 4_

- [ ] 8. Создание процедуры отката
- [x] 8.1 Документировать rollback процедуру

  - Создать пошаговую инструкцию отката
  - Протестировать процедуру восстановления из снапшота
  - Документировать команды для быстрого отката
  - _Требования: 1, 5_

- [x] 8.2 Создать backup стратегию


  - Настроить автоматическое резервное копирование
  - Создать расписание для снапшотов
  - Документировать процедуру восстановления
  - _Требования: 1_